{"ast":null,"code":"export default class ReCaptcha {\n  constructor(SITE_KEY, ACTION, V2_SITE_KEY, setWidgetID, _widgetID) {\n    this.siteKey = void 0;\n    this.v2siteKey = void 0;\n    this.action = void 0;\n    this.widgetID = void 0;\n    this.setWidgetID = void 0;\n\n    this.resetV2Captcha = () => {\n      const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[0];\n\n      if (v2CaptchaContainer) {\n        if (this.widgetID) {\n          window.grecaptcha.reset(this.widgetID);\n        }\n\n        v2CaptchaContainer.style.display = \"none\";\n      }\n    };\n\n    this.loadV2Captcha = v2siteKey => {\n      const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[0];\n\n      if (this.widgetID || this.widgetID == \"0\") {\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[0];\n\n        if (v2CaptchaContainer) {\n          v2CaptchaContainer.style.display = \"block\";\n        }\n      } else {\n        const widgetID = window.grecaptcha.render(v2CaptchaContainer, {\n          'sitekey': v2siteKey,\n          'theme': 'dark'\n        });\n        this.setWidgetID(widgetID);\n      }\n\n      return true;\n    };\n\n    this.loadReCaptcha = siteKey => {\n      const script = document.createElement('script');\n      script.src = `https://www.recaptcha.net/recaptcha/api.js?render=${siteKey}`;\n      document.body.appendChild(script);\n      return true;\n    };\n\n    this.loadReCaptcha(SITE_KEY);\n    this.siteKey = SITE_KEY;\n    this.v2siteKey = V2_SITE_KEY;\n    this.action = ACTION;\n    this.widgetID = _widgetID;\n    this.setWidgetID = setWidgetID;\n  }\n\n  async getToken() {\n    let isV2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let token = \"\",\n        v2Token = \"\";\n    !isV2 && (await window.grecaptcha.execute(this.siteKey, {\n      action: this.action\n    }).then(res => {\n      token = res;\n    }));\n\n    if (isV2) {\n      v2Token = await window.grecaptcha.getResponse(this.widgetID);\n    }\n\n    return {\n      token,\n      v2Token\n    };\n  }\n\n}","map":{"version":3,"names":["ReCaptcha","constructor","SITE_KEY","ACTION","V2_SITE_KEY","setWidgetID","widgetID","siteKey","v2siteKey","action","resetV2Captcha","v2CaptchaContainer","document","getElementsByClassName","window","grecaptcha","reset","style","display","loadV2Captcha","render","loadReCaptcha","script","createElement","src","body","appendChild","getToken","isV2","token","v2Token","execute","then","res","getResponse"],"sources":["/Users/saleemfareed/avalanche-faucet/client/src/components/ReCaptcha.ts"],"sourcesContent":["declare global {\n    interface Window {\n        grecaptcha: any\n    }\n}\n\nexport default class ReCaptcha {\n    siteKey: string\n    v2siteKey?: string\n    action: string\n    widgetID: string | undefined\n    setWidgetID: any\n        \n    constructor(SITE_KEY: string, ACTION: string, V2_SITE_KEY: string, setWidgetID: any, widgetID: string | undefined) {\n        this.loadReCaptcha(SITE_KEY)\n        \n        this.siteKey = SITE_KEY\n        this.v2siteKey = V2_SITE_KEY\n        this.action = ACTION\n        this.widgetID = widgetID\n        this.setWidgetID = setWidgetID\n    }\n\n    async getToken(isV2 = false): Promise<{token?: string, v2Token?: string}> {\n        let token = \"\", v2Token = \"\"\n        !isV2 && await window.grecaptcha.execute(this.siteKey, {action: this.action})\n            .then((res: string) => {\n                token = res\n            })\n        \n        if(isV2){\n            v2Token = await window.grecaptcha.getResponse(this.widgetID)\n        }\n\n        return { token, v2Token }\n    }\n\n    resetV2Captcha = () => {\n        const v2CaptchaContainer = <HTMLElement>document.getElementsByClassName('v2-recaptcha')[0]\n        if(v2CaptchaContainer) {\n            if(this.widgetID) {\n                window.grecaptcha.reset(this.widgetID)\n            }\n            v2CaptchaContainer.style.display = \"none\"\n        }\n    }\n\n    loadV2Captcha = (v2siteKey: string) => {\n        const v2CaptchaContainer = document.getElementsByClassName('v2-recaptcha')[0]\n\n        if(this.widgetID || this.widgetID == \"0\") {\n            const v2CaptchaContainer = <HTMLElement>document.getElementsByClassName('v2-recaptcha')[0]\n            if(v2CaptchaContainer) {\n                v2CaptchaContainer.style.display = \"block\"\n            }\n        } else {\n            const widgetID = window.grecaptcha.render(v2CaptchaContainer, {\n                'sitekey' : v2siteKey,\n                'theme': 'dark'\n            })\n            this.setWidgetID(widgetID)\n        }\n\n        return true\n    }\n\n    loadReCaptcha = (siteKey: string): boolean => {\n        const script = document.createElement('script')\n        script.src = `https://www.recaptcha.net/recaptcha/api.js?render=${siteKey}`\n\n        document.body.appendChild(script)\n        return true\n    }\n}"],"mappings":"AAMA,eAAe,MAAMA,SAAN,CAAgB;EAO3BC,WAAW,CAACC,QAAD,EAAmBC,MAAnB,EAAmCC,WAAnC,EAAwDC,WAAxD,EAA0EC,SAA1E,EAAwG;IAAA,KANnHC,OAMmH;IAAA,KALnHC,SAKmH;IAAA,KAJnHC,MAImH;IAAA,KAHnHH,QAGmH;IAAA,KAFnHD,WAEmH;;IAAA,KAwBnHK,cAxBmH,GAwBlG,MAAM;MACnB,MAAMC,kBAAkB,GAAgBC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,CAAxC;;MACA,IAAGF,kBAAH,EAAuB;QACnB,IAAG,KAAKL,QAAR,EAAkB;UACdQ,MAAM,CAACC,UAAP,CAAkBC,KAAlB,CAAwB,KAAKV,QAA7B;QACH;;QACDK,kBAAkB,CAACM,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;MACH;IACJ,CAhCkH;;IAAA,KAkCnHC,aAlCmH,GAkClGX,SAAD,IAAuB;MACnC,MAAMG,kBAAkB,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,CAA3B;;MAEA,IAAG,KAAKP,QAAL,IAAiB,KAAKA,QAAL,IAAiB,GAArC,EAA0C;QACtC,MAAMK,kBAAkB,GAAgBC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,CAAxC;;QACA,IAAGF,kBAAH,EAAuB;UACnBA,kBAAkB,CAACM,KAAnB,CAAyBC,OAAzB,GAAmC,OAAnC;QACH;MACJ,CALD,MAKO;QACH,MAAMZ,QAAQ,GAAGQ,MAAM,CAACC,UAAP,CAAkBK,MAAlB,CAAyBT,kBAAzB,EAA6C;UAC1D,WAAYH,SAD8C;UAE1D,SAAS;QAFiD,CAA7C,CAAjB;QAIA,KAAKH,WAAL,CAAiBC,QAAjB;MACH;;MAED,OAAO,IAAP;IACH,CAnDkH;;IAAA,KAqDnHe,aArDmH,GAqDlGd,OAAD,IAA8B;MAC1C,MAAMe,MAAM,GAAGV,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAAf;MACAD,MAAM,CAACE,GAAP,GAAc,qDAAoDjB,OAAQ,EAA1E;MAEAK,QAAQ,CAACa,IAAT,CAAcC,WAAd,CAA0BJ,MAA1B;MACA,OAAO,IAAP;IACH,CA3DkH;;IAC/G,KAAKD,aAAL,CAAmBnB,QAAnB;IAEA,KAAKK,OAAL,GAAeL,QAAf;IACA,KAAKM,SAAL,GAAiBJ,WAAjB;IACA,KAAKK,MAAL,GAAcN,MAAd;IACA,KAAKG,QAAL,GAAgBA,SAAhB;IACA,KAAKD,WAAL,GAAmBA,WAAnB;EACH;;EAEa,MAARsB,QAAQ,GAA4D;IAAA,IAA3DC,IAA2D,uEAApD,KAAoD;IACtE,IAAIC,KAAK,GAAG,EAAZ;IAAA,IAAgBC,OAAO,GAAG,EAA1B;IACA,CAACF,IAAD,KAAS,MAAMd,MAAM,CAACC,UAAP,CAAkBgB,OAAlB,CAA0B,KAAKxB,OAA/B,EAAwC;MAACE,MAAM,EAAE,KAAKA;IAAd,CAAxC,EACVuB,IADU,CACJC,GAAD,IAAiB;MACnBJ,KAAK,GAAGI,GAAR;IACH,CAHU,CAAf;;IAKA,IAAGL,IAAH,EAAQ;MACJE,OAAO,GAAG,MAAMhB,MAAM,CAACC,UAAP,CAAkBmB,WAAlB,CAA8B,KAAK5B,QAAnC,CAAhB;IACH;;IAED,OAAO;MAAEuB,KAAF;MAASC;IAAT,CAAP;EACH;;AA7B0B"},"metadata":{},"sourceType":"module"}